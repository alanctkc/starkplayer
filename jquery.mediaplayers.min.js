(function(a){a.mediaplayer_id_counter=0;a.fn.extend({mediaplayer:function(b){if(parseInt(swfobject.getFlashPlayerVersion()["major"])<10){return}var c={type:"",url:"",poster:"",width:"",height:"",autoplay:"false",buffertime:"10",border:"",bgcolor:"#ffffff",logo:"",videoplayer:"videoplayer.swf",audioplayer:"audioplayer.swf"};var b=a.extend(c,b);return this.each(function(){var i=a.extend({},b);var p=a(this);var f=a("<div></div>").attr("id","mediaplayer-"+a.mediaplayer_id_counter);p.children().each(function(){f.append(this)});p.append(f);a.mediaplayer_id_counter++;var k=p.find("video");if(i.url==""&&k.length>0){var g=k.first();if(g.attr("poster")){i.poster=g.attr("poster")}if(g.attr("src")){i.url=g.attr("src")}else{var e=g.find("source");if(e.length>0){var d=e.first();if(d.attr("src")){i.url=d.attr("src")}}}if(i.type==""){i.type="video"}}var r=p.find("audio");if(i.url==""&&r.length>0){var n=r.first();if(n.attr("src")){i.url=n.attr("src")}else{var e=n.find("source");if(e.length>0){var d=e.first();if(d.attr("src")){i.url=d.attr("src")}}}if(i.type==""){i.type="audio"}}if(i.url==""){var j=p.find("a");if(j.length>0){var s=j.first();if(s.attr("href")){i.url=s.attr("href")}var q=s.find("img");if(q.length>0){var m=q.first();if(m.attr("src")){i.poster=m.attr("src")}}}if(i.type==""){var h=/[^\?\#]*\.(.*?)((\?|\#)+?.*)*$/i.exec(i.url)[1];if(h=="mp4"||h=="m4v"||h=="flv"||h=="mpg"||h=="mpeg"){i.type="video"}else{if(h=="mp3"){i.type="audio"}}}}if(i.width==""){i.width=p.width()}if(i.height==""){i.height=p.height()}if(i.type=="audio"){i.width="320";i.height="70"}if(i.type=="video"){var t=i.videoplayer;var u={url:i.url,poster:i.poster,autoplay:i.autoplay,buffertime:i.buffertime,border:i.border,logo:i.logo};var l={allowFullScreen:"true",menu:"false"}}else{if(i.type=="audio"){var t=i.audioplayer;var u={url:i.url,autoplay:i.autoplay,border:i.border};var l={menu:"false",bgcolor:i.bgcolor}}}if(i.type!==""){swfobject.embedSWF(t,f.attr("id"),i.width,i.height,"10.0.0",null,u,l,{id:f.attr("id"),name:f.attr("id")})}})}})})(jQuery);